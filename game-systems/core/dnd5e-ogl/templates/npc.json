{
  "id": "dnd5e-npc",
  "systemId": "dnd5e-ogl",
  "entityType": "npc",
  "name": "D&D 5e NPC",

  "fields": [
    {
      "id": "name",
      "name": "NPC Name",
      "fieldType": "text",
      "required": true,
      "placeholder": "Enter NPC name",
      "width": "half"
    },
    {
      "id": "occupation",
      "name": "Occupation",
      "fieldType": "text",
      "placeholder": "Shopkeeper, Guard, Noble, etc.",
      "width": "half"
    },
    {
      "id": "race",
      "name": "Race",
      "fieldType": "text",
      "placeholder": "Human, Elf, Dwarf, etc.",
      "width": "third"
    },
    {
      "id": "age",
      "name": "Age",
      "fieldType": "text",
      "placeholder": "Young, Middle-aged, Elderly",
      "width": "third"
    },
    {
      "id": "alignment",
      "name": "Alignment",
      "fieldType": "select",
      "options": [
        {"value": "lg", "label": "Lawful Good"},
        {"value": "ng", "label": "Neutral Good"},
        {"value": "cg", "label": "Chaotic Good"},
        {"value": "ln", "label": "Lawful Neutral"},
        {"value": "n", "label": "True Neutral"},
        {"value": "cn", "label": "Chaotic Neutral"},
        {"value": "le", "label": "Lawful Evil"},
        {"value": "ne", "label": "Neutral Evil"},
        {"value": "ce", "label": "Chaotic Evil"}
      ],
      "defaultValue": "n",
      "width": "third"
    },

    {
      "id": "armor_class",
      "name": "Armor Class",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "hp_current",
      "name": "Current HP",
      "fieldType": "number",
      "defaultValue": 4,
      "width": "quarter"
    },
    {
      "id": "hp_max",
      "name": "Maximum HP",
      "fieldType": "number",
      "defaultValue": 4,
      "width": "quarter"
    },
    {
      "id": "speed",
      "name": "Speed",
      "fieldType": "number",
      "defaultValue": 30,
      "width": "quarter"
    },

    {
      "id": "strength",
      "name": "Strength",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "dexterity",
      "name": "Dexterity",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "constitution",
      "name": "Constitution",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "intelligence",
      "name": "Intelligence",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "wisdom",
      "name": "Wisdom",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },
    {
      "id": "charisma",
      "name": "Charisma",
      "fieldType": "number",
      "defaultValue": 10,
      "width": "quarter"
    },

    {
      "id": "skills",
      "name": "Skills",
      "fieldType": "text",
      "placeholder": "e.g., Persuasion +5, Insight +3",
      "width": "half"
    },
    {
      "id": "senses",
      "name": "Senses",
      "fieldType": "text",
      "placeholder": "e.g., Passive Perception 12",
      "defaultValue": "Passive Perception 10",
      "width": "half"
    },
    {
      "id": "languages",
      "name": "Languages",
      "fieldType": "text",
      "placeholder": "Common, Elvish, etc.",
      "defaultValue": "Common",
      "width": "full"
    },

    {
      "id": "abilities",
      "name": "Special Abilities",
      "fieldType": "textarea",
      "placeholder": "List any special abilities or traits",
      "width": "full"
    },
    {
      "id": "actions",
      "name": "Actions",
      "fieldType": "textarea",
      "placeholder": "Combat actions and attacks",
      "width": "full"
    },

    {
      "id": "personality",
      "name": "Personality",
      "fieldType": "textarea",
      "placeholder": "Personality traits, mannerisms",
      "width": "half"
    },
    {
      "id": "appearance",
      "name": "Appearance",
      "fieldType": "textarea",
      "placeholder": "Physical description",
      "width": "half"
    },
    {
      "id": "motivation",
      "name": "Motivation",
      "fieldType": "textarea",
      "placeholder": "What drives this NPC?",
      "width": "half"
    },
    {
      "id": "secrets",
      "name": "Secrets",
      "fieldType": "textarea",
      "placeholder": "Hidden information (GM only)",
      "width": "half"
    },

    {
      "id": "notes",
      "name": "Notes",
      "fieldType": "textarea",
      "placeholder": "Additional notes",
      "width": "full"
    }
  ],

  "computedFields": [
    {
      "id": "strength_modifier",
      "name": "Strength Modifier",
      "formula": "floor((strength - 10) / 2)",
      "dependencies": ["strength"]
    },
    {
      "id": "dexterity_modifier",
      "name": "Dexterity Modifier",
      "formula": "floor((dexterity - 10) / 2)",
      "dependencies": ["dexterity"]
    },
    {
      "id": "constitution_modifier",
      "name": "Constitution Modifier",
      "formula": "floor((constitution - 10) / 2)",
      "dependencies": ["constitution"]
    },
    {
      "id": "intelligence_modifier",
      "name": "Intelligence Modifier",
      "formula": "floor((intelligence - 10) / 2)",
      "dependencies": ["intelligence"]
    },
    {
      "id": "wisdom_modifier",
      "name": "Wisdom Modifier",
      "formula": "floor((wisdom - 10) / 2)",
      "dependencies": ["wisdom"]
    },
    {
      "id": "charisma_modifier",
      "name": "Charisma Modifier",
      "formula": "floor((charisma - 10) / 2)",
      "dependencies": ["charisma"]
    },
    {
      "id": "initiative",
      "name": "Initiative",
      "formula": "dexterity_modifier",
      "dependencies": ["dexterity_modifier"]
    }
  ],

  "rolls": [
    {
      "id": "initiative",
      "name": "Initiative",
      "formula": "d20 + {initiative}"
    },
    {
      "id": "strength_check",
      "name": "Strength Check",
      "formula": "d20 + {strength_modifier}"
    },
    {
      "id": "dexterity_check",
      "name": "Dexterity Check",
      "formula": "d20 + {dexterity_modifier}"
    },
    {
      "id": "constitution_check",
      "name": "Constitution Check",
      "formula": "d20 + {constitution_modifier}"
    },
    {
      "id": "intelligence_check",
      "name": "Intelligence Check",
      "formula": "d20 + {intelligence_modifier}"
    },
    {
      "id": "wisdom_check",
      "name": "Wisdom Check",
      "formula": "d20 + {wisdom_modifier}"
    },
    {
      "id": "charisma_check",
      "name": "Charisma Check",
      "formula": "d20 + {charisma_modifier}"
    }
  ],

  "sections": [
    {
      "id": "header",
      "name": "Basic Information",
      "fields": ["name", "occupation", "race", "age", "alignment"]
    },
    {
      "id": "combat",
      "name": "Combat Stats",
      "fields": ["armor_class", "hp_current", "hp_max", "speed"]
    },
    {
      "id": "abilities",
      "name": "Ability Scores",
      "fields": ["strength", "dexterity", "constitution", "intelligence", "wisdom", "charisma"]
    },
    {
      "id": "skills_senses",
      "name": "Skills & Senses",
      "fields": ["skills", "senses", "languages"]
    },
    {
      "id": "special",
      "name": "Abilities & Actions",
      "fields": ["abilities", "actions"]
    },
    {
      "id": "roleplay",
      "name": "Roleplaying",
      "fields": ["personality", "appearance", "motivation", "secrets"]
    },
    {
      "id": "notes",
      "name": "Notes",
      "fields": ["notes"]
    }
  ]
}
